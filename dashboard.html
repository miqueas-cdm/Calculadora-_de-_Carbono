<script>
    function fetchClientData() {
        const clientData = JSON.parse(localStorage.getItem('clientData')) || [];

        let totalFuelEmissions = 0;
        let totalElectricityEmissions = 0;

        const indexList = document.getElementById('indexList');
        indexList.innerHTML = '';

        clientData.forEach((client, index) => {
            const fuelEmissions = (client.carDistance / 10) * client.fuelFactor;
            const electricityEmissionFactor = 0.085;
            const electricityEmissions = client.electricity * 12 * electricityEmissionFactor;
            const totalEmissions = fuelEmissions + electricityEmissions;

            const listItem = document.createElement('div');
            listItem.className = 'index-item';
            listItem.innerHTML = `<strong>${index + 1}. ${client.name}</strong>: ${totalEmissions.toFixed(2)} kg COâ‚‚`;
            indexList.appendChild(listItem);

            totalFuelEmissions += fuelEmissions;
            totalElectricityEmissions += electricityEmissions;
        });

        generatePieChart(totalFuelEmissions, totalElectricityEmissions);
    }

    window.onload = fetchClientData;
</script>
